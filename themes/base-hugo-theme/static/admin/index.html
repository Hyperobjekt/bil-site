<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <script src="https://identity.netlify.com/v1/netlify-identity-widget.js"></script>
  <title>Content Manager</title>
</head>
<body>
  <!-- Include the script that builds the page and powers Netlify CMS -->
  <script src="https://unpkg.com/netlify-cms@2.10.48/dist/netlify-cms.js"></script>
  <link rel="stylesheet" href="https://use.typekit.net/ayl0mep.css">
  <script>
    CMS.registerPreviewStyle("/css/cms.css");
    CMS.registerEditorComponent({
      id: "fancyBlockquote",
      label: "Fancy Blockquote",
      fields: [
        {
          name: 'attrib',
          label: 'Attribution',
          widget: 'string',
          hint: 'Enter author name for quote attribution.'
        },
        {
          name: 'body',
          label: 'Quote',
          widget: 'markdown',
          hint: 'Enter the blockquote in Markdown format.'
        }
      ],
      pattern: /{{%[\s]+fancyblockquote[\s]+attrib="(\S*)"[\s]+%}}([\S\s]*?){{%\/[\s]+fancyblockquote[\s]+%}}/,
      fromBlock: function (match) {
        return {
          attrib: match[1],
          body: match[2]
        };
      },
      toBlock: function (obj) {
        return '\n{{% fancyblockquote attrib="' + obj.attrib + '" %}}' + obj.body + '{{%/ fancyblockquote %}}' + '\n';
      },
      toPreview: function (obj) {
        return '<blockquote class="fancy shortcode">' +
                 obj.body +
                 '<div class="quote-attrib">' + obj.attrib + '</div>' +
               '</blockquote>';
      }
    });
    // CMS.registerEditorComponent({
    //   id: "introSection",
    //   label: "Intro Section",
    //   fields: [
    //     {
    //       name: 'fips',
    //       label: 'FIPS Code',
    //       widget: 'string',
    //       hint: 'must match what is in the table.csv file'
    //     },
    //     {
    //       name: 'data',
    //       label: 'Table CSV File',
    //       widget: 'file',
    //       hint: 'csv file to pull overview stats from'
    //     },
    //     {
    //       name: 'body',
    //       label: 'Section Content',
    //       widget: 'markdown'
    //     }
    //   ],
    //   pattern: /{{%[\s]+report_intro[\s]+id="(\S*)"[\s]+data="(\S*)"[\s]+%}}([\S\s]*?){{%\/[\s]+report_intro[\s]+%}}/,
    //   fromBlock: function (match) {
    //     return {
    //       fips: match[1],
    //       data: match[2],
    //       body: match[3]
    //     };
    //   },
    //   toBlock: function (obj) {
    //     return '\n{{% report_intro id="' + obj.fips + '" data="' + obj.data + '" %}}' + obj.body + '{{%/ report_intro %}}' + '\n';
    //   },
    //   toPreview: function (obj) {
    //     return obj.body;
    //   }
    // });
  </script>
</body>
</html>
